---
import "../styles/global.css"

const response = await fetch("http://localhost:8080/api/equipos", {
  headers: {
    "Authorization": "Basic " + btoa("leaguebase:leaguebase"),
  },
});

let equipos = await response.json();
equipos = equipos.sort((a: any, b: any) => {
  return (b.ligasGanadas+b.torneosGanados) - (a.ligasGanadas+a.torneosGanados);
});

equipos = equipos.slice(0, 3);

let contador = 0;
---

<div class="max-w-6xl mx-auto px-4 py-10 text-center">
  <h2 class="text-3xl font-montserrat font-bold mb-8 text-primario">
    🏆 TOP MEJORES EQUIPOS
  </h2>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 items-start">
    {equipos.map((equipo: any, index: number) => {
    contador++;
  const card = (
    <div class="w-full max-w-sm mx-auto bg-gradient-to-t from-slate-950 to-slate-800 rounded-2xl shadow-md hover:shadow-lg transition duration-300 p-6 flex flex-col items-center">
      <img
        class="w-60 h-auto object-contain mb-4"
        src={equipo.urlFoto}
        alt={equipo.nombre}
      />
      <h3
        class={
          contador === 1
            ? 'text-2xl font-bold mb-2 text-amber-300'
            : contador === 2
            ? 'text-xl font-bold mb-2 text-gray-400'
            : 'text-lg font-bold mb-2 text-amber-800'
        }
      >
        {equipo.nombre}
      </h3>
      <p class="text-sm text-texto-primario">
        🥇 <strong>Ligas ganadas:</strong> {equipo.ligasGanadas}
      </p>
      <p class="text-sm text-texto-primario">
        🏆 <strong>Torneos ganados:</strong> {equipo.torneosGanados}
      </p>
    </div>
  );

  return card;
})}

  </div>
</div>